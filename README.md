
# CADAgent

CADAgent is an AI-powered system that generates and manipulates parametric 3D models using **OpenSCAD** and **DeepAgent**. It leverages **GPT-4.1** for interpreting user instructions and generating structured OpenSCAD code, enabling both text and image-based inputs to produce 3D geometries.

---

## Features

- Generate OpenSCAD models from **natural language instructions**.
- Support for **image-guided CAD generation** (input images like wheels or components).
- Modular and parametric design approach for **reusable components**.
- Sandbox execution using **LocalShellBackend** for safe OpenSCAD compilation.
- Persistent memory and session handling via **DeepAgent MemorySaver**.

---

## Installation

1. Clone the repository:

```bash
git clone https://github.com/Alton1998/CADAgent.git
cd CADAgent
````

2. Create a virtual environment and activate it:

```bash
python -m venv venv
# On Windows
venv\Scripts\activate
# On macOS/Linux
source venv/bin/activate
```

3. Install dependencies:

```bash
pip install -r requirements.txt
```

4. Install OpenSCAD:

* **Windows:** Download from [OpenSCAD](https://www.openscad.org/downloads.html)
* **macOS:** `brew install openscad`
* **Linux:** `sudo apt install openscad`

5. Add OpenSCAD to your system `PATH` (if not automatically added).

6. Create a `.env` file with your API keys:

```env
OPENAI_API_KEY=your_openai_api_key_here
MODEL=openai:gpt-4.1-2025-04-14
```

---

## Usage

Run the agent:

```bash
python agent.py
```

1. Enter a natural language description for the 3D object.
2. Optionally, provide an **image URL** to guide the CAD generation.
3. The agent will generate OpenSCAD code and execute it in the sandbox.
4. Generated STL/SCAD files are stored in the `sandbox/` folder.

Example:

```
Enter your message: I want to create a simple parametric wheel
Enter image url: https://raw.githubusercontent.com/.../wheel.png
```

---

## Project Structure

```
CADAgent/
├── main.py                  # Entry point for the agent
├── subagent/                # Subagents for specialized tasks
│   └── openscad_subagent.py
├── prompts/                 # System prompts for GPT-4.1
│   └── COORDINATOR_SYSTEM_PROMPT.py
├── utils/                   # Helper functions (formatting, utilities)
├── sandbox/                 # Temporary outputs (STL/SCAD)
├── memory/                  # Persistent agent memory
├── requirements.txt
└── .env                     # API keys and environment variables (ignored by git)
```

---

## Notes

* Always use **raw image URLs** (e.g., `https://raw.githubusercontent.com/...`) for image inputs.
* `.env` and sandbox outputs are ignored in Git (`.gitignore`) for security and cleanliness.
* The system is designed to **separate generation from compilation**, so OpenSCAD code is always first generated by GPT-4.1 and then executed safely.

---

## Examples
<img width="785" height="521" alt="image" src="https://github.com/user-attachments/assets/1a5da4ff-029e-4db6-bcb7-403542c29c77" />


## License

MIT License. See `LICENSE` file for details.

---

## Acknowledgements

* [OpenSCAD](https://www.openscad.org/) for parametric 3D modeling.
* [DeepAgent](https://github.com/deepagents) framework for agent orchestration.
* OpenAI GPT-4.1 for language and vision-based CAD generation.

